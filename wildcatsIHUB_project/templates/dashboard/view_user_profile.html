{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ viewed_user.username }}'s Profile - Wildcats iHUB</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/view_user_profile.css' %}">
</head>
<body>
    <div class="profile-container">
        <!-- Professional Header Section -->
        <div class="profile-header">
            <!-- Back to Home Button - Top Left -->
            <div class="back-to-home-wrapper">
                <a href="{% url 'home' %}" class="back-btn" title="Back to Home">
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="header-background"></div>
            <div class="header-content">
                <div class="user-avatar-section">
                    <div class="avatar-wrapper">
                        <div class="avatar-img"></div>
                    </div>
                </div>
                
                <div class="user-info-section">
                    <div class="user-main-info">
                        <h1 class="user-name">{{ viewed_user.first_name }} {{ viewed_user.last_name }}</h1>
                        {% if is_own_profile %}
                        <div class="header-buttons">
                            <a href="{% url 'user_profile' %}" class="edit-profile-btn">
                                <i class="fas fa-edit"></i> My Profile
                            </a>
                        </div>
                        {% endif %}
                    </div>
                    <p class="user-title">
                        {% if viewed_profile.major %}
                            {{ viewed_profile.major }}
                        {% else %}
                            Student
                        {% endif %}
                    </p>
                    <div class="user-details">
                        <div class="detail-badge">
                            <i class="fas fa-university"></i>
                            <span>
                                {% if viewed_profile.school %}
                                    {{ viewed_profile.school }}
                                {% else %}
                                    University not specified
                                {% endif %}
                            </span>
                        </div>
                        <div class="detail-badge">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>
                                {% if viewed_profile.location %}
                                    {{ viewed_profile.location }}
                                {% else %}
                                    Location not specified
                                {% endif %}
                            </span>
                        </div>
                        <div class="detail-badge">
                            <i class="fas fa-graduation-cap"></i>
                            <span>
                                {% if viewed_profile.graduation_year %}
                                    Class of {{ viewed_profile.graduation_year }}
                                {% else %}
                                    Graduation year not specified
                                {% endif %}
                            </span>
                        </div>
                    </div>
                    
                    <div class="social-links">
                        {% if viewed_profile.github_url %}
                        <a href="{{ viewed_profile.github_url }}" class="social-link" title="GitHub" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                        {% endif %}
                        {% if viewed_profile.linkedin_url %}
                        <a href="{{ viewed_profile.linkedin_url }}" class="social-link" title="LinkedIn" target="_blank">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        {% endif %}
                        {% if viewed_profile.portfolio_url %}
                        <a href="{{ viewed_profile.portfolio_url }}" class="social-link" title="Portfolio" target="_blank">
                            <i class="fas fa-globe"></i>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-calendar"></i></div>
                <div class="stat-content">
                    <span class="stat-number">
                        {% if viewed_profile.year_level %}
                            {{ viewed_profile.year_level }}
                        {% else %}
                            -
                        {% endif %}
                    </span>
                    <span class="stat-label">Year</span>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-code"></i></div>
                <div class="stat-content">
                    <span class="stat-number">{{ projects.count }}</span>
                    <span class="stat-label">Projects</span>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-eye"></i></div>
                <div class="stat-content">
                    <span class="stat-number">
                        {% if total_views %}
                            {{ total_views }}
                        {% else %}
                            0
                        {% endif %}
                    </span>
                    <span class="stat-label">Profile Views</span>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                <div class="stat-content">
                    <span class="stat-number">
                        {% if total_likes %}
                            {{ total_likes }}
                        {% else %}
                            0
                        {% endif %}
                    </span>
                    <span class="stat-label">Total Likes</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="profile-content">
            <!-- Left Column -->
            <div class="left-column">
                <!-- About Section -->
                <div class="info-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-user"></i>
                            <h3>About Me</h3>
                        </div>
                    </div>
                    <div class="card-content">
                        <p class="about-text">
                            {% if viewed_profile.bio %}
                                {{ viewed_profile.bio }}
                            {% else %}
                                This user hasn't added a bio yet.
                            {% endif %}
                        </p>
                        
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Specialization</span>
                                <span class="info-value">
                                    {% if viewed_profile.specialization %}
                                        {{ viewed_profile.specialization }}
                                    {% else %}
                                        Not specified
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Academic Information -->
                <div class="info-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-book"></i>
                            <h3>Academic Information</h3>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Major</span>
                                <span class="info-value">
                                    {% if viewed_profile.major %}
                                        {{ viewed_profile.major }}
                                    {% else %}
                                        Not specified
                                    {% endif %}
                                </span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Minor</span>
                                <span class="info-value">
                                    {% if viewed_profile.minor %}
                                        {{ viewed_profile.minor }}
                                    {% else %}
                                        Not specified
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        
                        <div class="section-divider"></div>
                        
                        <h4 class="section-subtitle">Current Courses</h4>
                        <div class="tags-container">
                            {% if viewed_profile.courses %}
                                {% for course in viewed_profile.courses.split %}
                                    <span class="tag">{{ course }}</span>
                                {% endfor %}
                            {% else %}
                                <span class="tag">No courses added</span>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Study Interests -->
                <div class="info-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-lightbulb"></i>
                            <h3>Study Interests</h3>
                        </div>
                    </div>
                    <div class="card-content">
                        <p class="content-text">
                            {% if viewed_profile.interests %}
                                {{ viewed_profile.interests }}
                            {% else %}
                                No interests specified
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Skills Section -->
                <div class="info-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line"></i>
                            <h3>Technical Skills</h3>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="skills-list">
                            {% if viewed_profile.skills %}
                                {% for skill in viewed_profile.skills.split %}
                                    <div class="skill-tag">{{ skill }}</div>
                                {% endfor %}
                            {% else %}
                                <div class="empty-state-card">
                                    <i class="fas fa-code"></i>
                                    <p>No skills listed yet</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Projects Section -->
                <div class="info-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-folder-open"></i>
                            <h3>Projects ({{ projects.count }})</h3>
                        </div>
                        {% if is_own_profile %}
                        <a href="{% url 'submit_project' %}" class="add-project-btn">
                            <i class="fas fa-plus"></i> Add Project
                        </a>
                        {% endif %}
                    </div>
                    <div class="card-content">
                        <div class="projects-list">
                            {% if projects %}
                                {% for project in projects %}
                                    <div class="project-card">
                                        <div class="project-header">
                                            <div>
                                                <h4 class="project-title">{{ project.title }}</h4>
                                                <div class="project-meta">
                                                    <span class="meta-item">
                                                        <i class="fas fa-calendar"></i>
                                                        {{ project.created_at|date:"M Y" }}
                                                    </span>
                                                    <span class="meta-item">
                                                        <i class="fas fa-tag"></i>
                                                        {{ project.category }}
                                                    </span>
                                                    <span class="meta-item">
                                                        <i class="fas fa-eye"></i>
                                                        {{ project.views }} views
                                                    </span>
                                                </div>
                                            </div>
                                            <span class="project-status status-completed">Completed</span>
                                        </div>
                                        <p class="project-description">{{ project.description }}</p>
                                        <div class="project-technologies">
                                            {% for tech in project.tech_used.split %}
                                                <span class="tech-tag">{{ tech }}</span>
                                            {% endfor %}
                                        </div>
                                        <div class="project-footer">
                                            <div class="project-links">
                                                {% if project.github_url %}
                                                <a href="{{ project.github_url }}" target="_blank" class="btn-outline-primary btn-sm">
                                                    <i class="fab fa-github"></i> Code
                                                </a>
                                                {% endif %}
                                                {% if project.live_demo %}
                                                <a href="{{ project.live_demo }}" target="_blank" class="btn-outline-primary btn-sm">
                                                    <i class="fas fa-external-link-alt"></i> Demo
                                                </a>
                                                {% endif %}
                                            </div>
                                            <a href="{% url 'view_project' project.id %}" class="btn-outline-primary">
                                                <i class="fas fa-eye"></i> View Details
                                            </a>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="empty-state-card">
                                    <i class="fas fa-folder-plus"></i>
                                    <p>No projects added yet</p>
                                    {% if is_own_profile %}
                                    <small>Click "Add Project" to get started!</small>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set avatar initials
        document.addEventListener('DOMContentLoaded', function() {
            const userName = "{{ viewed_user.first_name }} {{ viewed_user.last_name }}";
            const avatar = document.querySelector('.avatar-img');
            if (avatar) {
                const initials = userName.split(' ').map(n => n[0]).join('').toUpperCase();
                avatar.textContent = initials;
            }
        });
    </script>
</body>
</html>