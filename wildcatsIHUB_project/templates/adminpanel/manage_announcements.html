{% extends 'adminpanel/base_admin.html' %}
{% block title %}Announcements{% endblock %}
{% block content %}

<div class="projects-section">
    <div class="section-header">
        <h2>Manage Announcements</h2>
        <p>Broadcast messages to all students.</p>
    </div>

    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; border: 1px solid #e9ecef;">
        <form method="POST">
            {% csrf_token %}
            <div style="margin-bottom: 1rem;">
                <label>Title</label>
                {{ form.title }}
            </div>
            <div style="margin-bottom: 1rem;">
                <label>Message</label>
                {{ form.message }}
            </div>
            <div style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                {{ form.is_active }} <label style="margin:0;">Active (Visible to students)</label>
            </div>
            <button type="submit" class="btn btn-primary">Post Announcement</button>
        </form>
    </div>

    <h3 style="margin-bottom: 1rem;">History</h3>
    {% for item in announcements %}
    <div class="project-item {% if item.is_active %}announcement-active{% else %}announcement-inactive{% endif %}">
        <div class="project-header">
            <h3>{{ item.title }}</h3>
            <span class="status-badge {% if item.is_active %}approved{% else %}completed{% endif %}">
                {% if item.is_active %}Active{% else %}Inactive{% endif %}
            </span>
        </div>
        <p>{{ item.message }}</p>
        <div style="font-size: 0.85rem; color: #666; margin-top: 10px;">
            Posted: {{ item.created_at|date:"M d, Y" }}
            <a href="{% url 'delete_announcement' item.pk %}" class="btn-sm btn-danger" style="float: right; text-decoration: none;" onclick="return confirm('Delete this announcement?');">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}