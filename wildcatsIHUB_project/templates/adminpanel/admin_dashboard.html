{% extends 'adminpanel/base_admin.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<div class="welcome-header">
    <div class="welcome-text">
        <h1>Welcome, Admin!</h1>
        <p class="subtitle">Here's a quick overview of the system.</p>
    </div>
    <div class="user-info">
        <div class="user-avatar">
            <img src="{% if request.user.userprofile.avatar %}{{ request.user.userprofile.avatar.url }}{% else %}{% static 'avatars/default_profile.png' %}{% endif %}" alt="Admin Avatar">
        </div>
        <div class="user-details">
            <span class="user-name">{{ admin_name }}</span>
            <span class="user-role">Administrator</span>
        </div>
    </div>
</div>

<div class="stats">
    <div class="card blue">
        <div class="icon"><i data-lucide="users"></i></div>
        <h2>{{ total_users }}</h2> 
        <p>Total Users</p>
    </div>
    <div class="card green">
        <div class="icon"><i data-lucide="check-circle"></i></div>
        <h2>{{ approved_projects_count }}</h2> 
        <p>Approved Projects</p>
    </div>
    <div class="card purple">
        <div class="icon"><i data-lucide="folder"></i></div>
        <h2>{{ ongoing_projects_count }}</h2>
        <p>Ongoing Projects</p>
    </div>
</div>

<div class="projects-section">
    <div class="section-header">
        <h2>Recent Projects</h2>
        <p>Check out the latest activities.</p>
    </div>

    {% for project in projects %}
    <div class="project-item">
        <div class="project-header">
            <h3>{{ project.title }}</h3> 
            <div class="project-status">
                <span class="status-badge {{ project.badge_class }}"> 
                    {{ project.status }}
                </span>
            </div>
        </div>
        <div class="project-description">{{ project.description }}</div>
        <div class="project-languages">
            {% for lang in project.languages %} 
            <span class="language-tag">{{ lang }}</span>
            {% endfor %}
        </div>
        <div class="project-actions">
            <a href="{% url 'project_detail' pk=project.pk %}" class="btn-primary">View</a>
            
            <a href="{% url 'project_edit' pk=project.pk %}" class="btn-secondary">Edit</a>
        </div>
    </div>
    {% empty %}
    <div class="empty-state">
        <h3>No projects found</h3>
        <p>Projects will appear here once added.</p>
    </div>
    {% endfor %}
</div>

{% endblock %}